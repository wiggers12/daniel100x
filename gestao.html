<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GestÃ£o Financeira - 7XX</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- HEADER -->
  <header class="topbar">
    <button class="hamburger" id="menuToggle">â˜°</button>
    <a href="index.html" class="logo">7XX</a>
    <div class="acoes">
      <a href="cadastro.html" class="btn-preto">Cadastre-se</a>
      <a href="login.html" class="btn-azul">Entrar</a>
    </div>
  </header>

  <!-- MENU -->
  <nav id="menuLateral" class="menu-lateral">
    <a href="planos.html">ğŸ“„ Planos</a>
    <a href="sorteios.html">ğŸ Sorteios</a>
    <a href="gestao.html">ğŸ“Š GestÃ£o Financeira</a>
  </nav>

  <!-- PLANILHA -->
  <div class="form-container">
    <h2>GestÃ£o de Banca ğŸ“Š</h2>
    <input type="number" id="valorInicial" placeholder="Valor Inicial" required>
    <input type="number" id="valorSeguro" placeholder="Valor Seguro por rodada" required>
    <input type="number" id="ganhos" placeholder="Ganhos" required>
    <input type="number" id="perdas" placeholder="Perdas" required>
    <button onclick="salvarGestao()">Salvar GestÃ£o</button>

    <div id="resultado" style="margin-top:20px;">
      <p><strong>Lucro/PrejuÃ­zo:</strong> <span id="lucro">0</span></p>
    </div>
  </div>

  <!-- Firebase -->
  <script type="module">
    import { app, db } from "./firebase.js";
    import { ref, set } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

    window.salvarGestao = async function() {
      const valorInicial = parseFloat(document.getElementById("valorInicial").value || 0);
      const valorSeguro = parseFloat(document.getElementById("valorSeguro").value || 0);
      const ganhos = parseFloat(document.getElementById("ganhos").value || 0);
      const perdas = parseFloat(document.getElementById("perdas").value || 0);

      const lucro = (ganhos - perdas).toFixed(2);
      document.getElementById("lucro").textContent = lucro;

      await set(ref(db, "gestao/anonimo"), {
        valorInicial, valorSeguro, ganhos, perdas, lucro,
        data: new Date().toISOString()
      });

      alert("GestÃ£o salva com sucesso!");
    }
  </script>

  <!-- Script do menu -->
  <script>
    const menuToggle = document.getElementById('menuToggle');
    const menuLateral = document.getElementById('menuLateral');
    menuToggle.addEventListener('click', () => {
      menuLateral.classList.toggle('ativo');
      menuToggle.textContent = menuLateral.classList.contains('ativo') ? 'âœ–' : 'â˜°';
    });
  </script>
</body>
</html>